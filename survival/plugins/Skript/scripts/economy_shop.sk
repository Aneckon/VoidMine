# –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ - –ü–æ–∫—É–ø–∫–∞ –∏ –ø—Ä–æ–¥–∞–∂–∞ –±–ª–æ–∫–æ–≤
# –í–µ—Ä—Å–∏—è: 2.6 - Carrot Bug Fixed
# –õ–ö–ú - –ü–†–û–î–ê–¢–¨ | –ü–ö–ú - –ö–£–ü–ò–¢–¨


# === –¶–ï–ù–´ –ù–ê –ë–õ–û–ö–ò (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å) ===
on load:
    # –û–±—ã—á–Ω—ã–µ –±–ª–æ–∫–∏ (—Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ | —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏)
    set {price::stone::sell} to 1
    set {price::stone::buy} to 2
    
    set {price::cobblestone::sell} to 0.5
    set {price::cobblestone::buy} to 1
    
    set {price::dirt::sell} to 0.3
    set {price::dirt::buy} to 0.6
    
    set {price::oak log::sell} to 2
    set {price::oak log::buy} to 4
    
    set {price::spruce log::sell} to 2
    set {price::spruce log::buy} to 4
    
    set {price::birch log::sell} to 2
    set {price::birch log::buy} to 4
    
    # –†—É–¥—ã
    set {price::coal::sell} to 5
    set {price::coal::buy} to 10
    
    set {price::raw iron::sell} to 10
    set {price::raw iron::buy} to 20
    
    set {price::raw gold::sell} to 15
    set {price::raw gold::buy} to 30
    
    set {price::diamond::sell} to 50
    set {price::diamond::buy} to 100
    
    set {price::emerald::sell} to 40
    set {price::emerald::buy} to 80
    
    # –ü—Ä–æ—á–µ–µ
    set {price::wheat::sell} to 2
    set {price::wheat::buy} to 4
    
    set {price::carrot::sell} to 1.5
    set {price::carrot::buy} to 3
    
    set {price::potato::sell} to 1.5
    set {price::potato::buy} to 3
    
    set {price::apple::sell} to 3
    set {price::apple::buy} to 6


# === GUI –ú–ï–ù–Æ –ú–ê–ì–ê–ó–ò–ù–ê ===
command /shop:
    aliases: /–º–∞–≥–∞–∑–∏–Ω
    trigger:
        open_main_shop_menu(player)

function open_main_shop_menu(p: player):
    open chest inventory with 3 rows named "&c‚ö° –ú–ê–ì–ê–ó–ò–ù" to {_p}
    
    # –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ë–ª–æ–∫–∏
    set {_blocks} to stone named "&cüß± –û–±—ã—á–Ω—ã–µ –±–ª–æ–∫–∏" with lore "&7–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è", "", "&8‚Ä¢ &7–ö–∞–º–µ–Ω—å", "&8‚Ä¢ &7–ë—É–ª—ã–∂–Ω–∏–∫", "&8‚Ä¢ &7–ó–µ–º–ª—è", "&8‚Ä¢ &7–ë—Ä–µ–≤–Ω–∞", "" and "&8–õ–ö–ú &7- –æ—Ç–∫—Ä—ã—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é"
    set slot 11 of {_p}'s current inventory to {_blocks}
    
    # –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –†—É–¥—ã
    set {_ores} to diamond named "&cüíé –†—É–¥—ã –∏ –º–µ—Ç–∞–ª–ª—ã" with lore "&7–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è", "", "&8‚Ä¢ &7–£–≥–æ–ª—å", "&8‚Ä¢ &7–°—ã—Ä–æ–µ –∂–µ–ª–µ–∑–æ", "&8‚Ä¢ &7–°—ã—Ä–æ–µ –∑–æ–ª–æ—Ç–æ", "&8‚Ä¢ &7–ê–ª–º–∞–∑—ã", "&8‚Ä¢ &7–ò–∑—É–º—Ä—É–¥—ã", "" and "&8–õ–ö–ú &7- –æ—Ç–∫—Ä—ã—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é"
    set slot 13 of {_p}'s current inventory to {_ores}
    
    # –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –†–µ—Å—É—Ä—Å—ã
    set {_resources} to wheat named "&cüåæ –°–µ–ª—å—Å–∫–æ–µ —Ö–æ–∑—è–π—Å—Ç–≤–æ" with lore "&7–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è", "", "&8‚Ä¢ &7–ü—à–µ–Ω–∏—Ü–∞", "&8‚Ä¢ &7–ú–æ—Ä–∫–æ–≤—å", "&8‚Ä¢ &7–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å", "&8‚Ä¢ &7–Ø–±–ª–æ–∫–∏", "" and "&8–õ–ö–ú &7- –æ—Ç–∫—Ä—ã—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é"
    set slot 15 of {_p}'s current inventory to {_resources}
    
    # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–±–∞–ª–∞–Ω—Å —á–µ—Ä–µ–∑ Vault)
    set {_money} to balance of {_p}
    set {_balance} to head from value "eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMzRjY2I1Mjc1MGU5N2U4MzBhZWJmYThhMjFkNWRhMGQzNjRkMGZkYWQ5ZmIwY2MyMjBmZTJjYTg0MTE4NDJjMyJ9fX0="
    set name of {_balance} to "&cüí∞ –ë–∞–ª–∞–Ω—Å"
    set line 1 of lore of {_balance} to "&8‚ùñ &7–í–∞—à –±–∞–ª–∞–Ω—Å:"
    set line 2 of lore of {_balance} to "&8‚§∑ &f%{_money}% &7–º–æ–Ω–µ—Ç"
    set slot 4 of {_p}'s current inventory to {_balance}
    
    # –ó–∞–∫—Ä—ã—Ç—å
    set {_close} to head from value "eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvOTBlMGE0ZDQ4Y2Q4MjlhNmQ1ODY4OTA5ZDY0M2ZhNGFmZmQzOWU4YWU2Y2FhZjZlYzc5NjA5Y2Y3NjQ5YjFjIn19fQ=="
    set name of {_close} to "&c‚ùå –ó–∞–∫—Ä—ã—Ç—å"
    set line 1 of lore of {_close} to "&8‚ùñ &7–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é"
    set slot 26 of {_p}'s current inventory to {_close}

function open_blocks_menu(p: player):
    open chest inventory with 4 rows named "&cüß± –ë–õ–û–ö–ò" to {_p}
    
    # –ö–∞–º–µ–Ω—å
    set {_amount} to amount of stone in {_p}'s inventory
    set slot 10 of {_p}'s current inventory to stone named "&7–ö–∞–º–µ–Ω—å" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::stone::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::stone::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –ë—É–ª—ã–∂–Ω–∏–∫
    set {_amount} to amount of cobblestone in {_p}'s inventory
    set slot 11 of {_p}'s current inventory to cobblestone named "&7–ë—É–ª—ã–∂–Ω–∏–∫" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::cobblestone::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::cobblestone::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –ó–µ–º–ª—è
    set {_amount} to amount of dirt in {_p}'s inventory
    set slot 12 of {_p}'s current inventory to dirt named "&7–ó–µ–º–ª—è" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::dirt::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::dirt::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –î—É–±–æ–≤–æ–µ –±—Ä–µ–≤–Ω–æ
    set {_amount} to amount of oak log in {_p}'s inventory
    set slot 13 of {_p}'s current inventory to oak log named "&7–î—É–±–æ–≤–æ–µ –±—Ä–µ–≤–Ω–æ" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::oak log::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::oak log::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –ï–ª–æ–≤–æ–µ –±—Ä–µ–≤–Ω–æ
    set {_amount} to amount of spruce log in {_p}'s inventory
    set slot 14 of {_p}'s current inventory to spruce log named "&7–ï–ª–æ–≤–æ–µ –±—Ä–µ–≤–Ω–æ" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::spruce log::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::spruce log::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –ë–µ—Ä–µ–∑–æ–≤–æ–µ –±—Ä–µ–≤–Ω–æ
    set {_amount} to amount of birch log in {_p}'s inventory
    set slot 15 of {_p}'s current inventory to birch log named "&7–ë–µ—Ä–µ–∑–æ–≤–æ–µ –±—Ä–µ–≤–Ω–æ" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::birch log::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::birch log::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –ù–∞–∑–∞–¥
    set {_close} to head from value "eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvOTBlMGE0ZDQ4Y2Q4MjlhNmQ1ODY4OTA5ZDY0M2ZhNGFmZmQzOWU4YWU2Y2FhZjZlYzc5NjA5Y2Y3NjQ5YjFjIn19fQ=="
    set name of {_close} to "&c‚ùå –ó–∞–∫—Ä—ã—Ç—å"
    set line 1 of lore of {_close} to "&8‚ùñ &7–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
    set slot 31 of {_p}'s current inventory to {_close}

function open_ores_menu(p: player):
    open chest inventory with 4 rows named "&cüíé –†–£–î–´" to {_p}
    
    # –£–≥–æ–ª—å
    set {_amount} to amount of coal in {_p}'s inventory
    set slot 10 of {_p}'s current inventory to coal named "&7–£–≥–æ–ª—å" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::coal::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::coal::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –°—ã—Ä–æ–µ –∂–µ–ª–µ–∑–æ
    set {_amount} to amount of raw iron in {_p}'s inventory
    set slot 11 of {_p}'s current inventory to raw iron named "&7–°—ã—Ä–æ–µ –∂–µ–ª–µ–∑–æ" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::raw iron::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::raw iron::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –°—ã—Ä–æ–µ –∑–æ–ª–æ—Ç–æ
    set {_amount} to amount of raw gold in {_p}'s inventory
    set slot 12 of {_p}'s current inventory to raw gold named "&7–°—ã—Ä–æ–µ –∑–æ–ª–æ—Ç–æ" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::raw gold::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::raw gold::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –ê–ª–º–∞–∑
    set {_amount} to amount of diamond in {_p}'s inventory
    set slot 13 of {_p}'s current inventory to diamond named "&7–ê–ª–º–∞–∑" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::diamond::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::diamond::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –ò–∑—É–º—Ä—É–¥
    set {_amount} to amount of emerald in {_p}'s inventory
    set slot 14 of {_p}'s current inventory to emerald named "&7–ò–∑—É–º—Ä—É–¥" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::emerald::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::emerald::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –ù–∞–∑–∞–¥
    set {_close} to head from value "eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvOTBlMGE0ZDQ4Y2Q4MjlhNmQ1ODY4OTA5ZDY0M2ZhNGFmZmQzOWU4YWU2Y2FhZjZlYzc5NjA5Y2Y3NjQ5YjFjIn19fQ=="
    set name of {_close} to "&c‚ùå –ó–∞–∫—Ä—ã—Ç—å"
    set line 1 of lore of {_close} to "&8‚ùñ &7–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
    set slot 31 of {_p}'s current inventory to {_close}

function open_farming_menu(p: player):
    open chest inventory with 4 rows named "&cüåæ –†–ï–°–£–†–°–´" to {_p}
    
    # –ü—à–µ–Ω–∏—Ü–∞
    set {_amount} to amount of wheat in {_p}'s inventory
    set slot 11 of {_p}'s current inventory to wheat named "&7–ü—à–µ–Ω–∏—Ü–∞" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::wheat::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::wheat::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –ú–æ—Ä–∫–æ–≤—å
    set {_amount} to amount of carrot in {_p}'s inventory
    set slot 12 of {_p}'s current inventory to carrot named "&7–ú–æ—Ä–∫–æ–≤—å" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::carrot::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::carrot::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å
    set {_amount} to amount of potato in {_p}'s inventory
    set slot 13 of {_p}'s current inventory to potato named "&7–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::potato::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::potato::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –Ø–±–ª–æ–∫–æ
    set {_amount} to amount of apple in {_p}'s inventory
    set slot 14 of {_p}'s current inventory to apple named "&7–Ø–±–ª–æ–∫–æ" with lore "", "&8–ü—Ä–æ–¥–∞–∂–∞: &c%{price::apple::sell}% &7–º–æ–Ω–µ—Ç", "&8–ü–æ–∫—É–ø–∫–∞: &c%{price::apple::buy}% &7–º–æ–Ω–µ—Ç", "", "&8–£ –≤–∞—Å: &7%{_amount}%—à—Ç", "", "&8–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å 1—à—Ç", "&8–ü–ö–ú &7- –∫—É–ø–∏—Ç—å 1—à—Ç" and "&8Shift+–õ–ö–ú &7- –ø—Ä–æ–¥–∞—Ç—å –≤—Å–µ"
    
    # –ù–∞–∑–∞–¥
    set {_close} to head from value "eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvOTBlMGE0ZDQ4Y2Q4MjlhNmQ1ODY4OTA5ZDY0M2ZhNGFmZmQzOWU4YWU2Y2FhZjZlYzc5NjA5Y2Y3NjQ5YjFjIn19fQ=="
    set name of {_close} to "&c‚ùå –ó–∞–∫—Ä—ã—Ç—å"
    set line 1 of lore of {_close} to "&8‚ùñ &7–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
    set slot 31 of {_p}'s current inventory to {_close}

# === –û–ë–†–ê–ë–û–¢–ö–ê –ö–õ–ò–ö–û–í –í GUI ===
on inventory click:
    if name of player's current inventory contains "&c":
        cancel event
        
        # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
        if name of player's current inventory is "&c‚ö° –ú–ê–ì–ê–ó–ò–ù":
            if index of event-slot is 11:
                open_blocks_menu(player)
            else if index of event-slot is 13:
                open_ores_menu(player)
            else if index of event-slot is 15:
                open_farming_menu(player)
            else if index of event-slot is 26:
                close player's inventory
        
        # –ú–µ–Ω—é –±–ª–æ–∫–æ–≤
        else if name of player's current inventory is "&cüß± –ë–õ–û–ö–ò":
            if index of event-slot is 31:
                open_main_shop_menu(player)
            else if index of event-slot is 10:
                handle_trade(player, "stone", click type)
            else if index of event-slot is 11:
                handle_trade(player, "cobblestone", click type)
            else if index of event-slot is 12:
                handle_trade(player, "dirt", click type)
            else if index of event-slot is 13:
                handle_trade(player, "oak log", click type)
            else if index of event-slot is 14:
                handle_trade(player, "spruce log", click type)
            else if index of event-slot is 15:
                handle_trade(player, "birch log", click type)
        
        # –ú–µ–Ω—é —Ä—É–¥
        else if name of player's current inventory is "&cüíé –†–£–î–´":
            if index of event-slot is 31:
                open_main_shop_menu(player)
            else if index of event-slot is 10:
                handle_trade(player, "coal", click type)
            else if index of event-slot is 11:
                handle_trade(player, "raw iron", click type)
            else if index of event-slot is 12:
                handle_trade(player, "raw gold", click type)
            else if index of event-slot is 13:
                handle_trade(player, "diamond", click type)
            else if index of event-slot is 14:
                handle_trade(player, "emerald", click type)
        
        # –ú–µ–Ω—é —Ñ–µ—Ä–º—ã
        else if name of player's current inventory is "&cüåæ –†–ï–°–£–†–°–´":
            if index of event-slot is 31:
                open_main_shop_menu(player)
            else if index of event-slot is 11:
                handle_trade(player, "wheat", click type)
            else if index of event-slot is 12:
                handle_trade(player, "carrot", click type)
            else if index of event-slot is 13:
                handle_trade(player, "potato", click type)
            else if index of event-slot is 14:
                handle_trade(player, "apple", click type)

# === –§–£–ù–ö–¶–ò–Ø –û–ë–†–ê–ë–û–¢–ö–ò –ü–û–ö–£–ü–ö–ò/–ü–†–û–î–ê–ñ–ò ===
function handle_trade(p: player, itemname: text, click: click type):
    # –ü–æ–ª—É—á–∞–µ–º item type –∏–∑ —Å—Ç—Ä–æ–∫–∏
    set {_item} to {_itemname} parsed as item type
    
    # –õ–ö–ú - –ü–†–û–î–ê–¢–¨ 1—à—Ç
    if {_click} is left mouse button:
        set {_amount} to amount of {_item} in {_p}'s inventory
        
        if {_amount} is 0:
            send "&c–£ –≤–∞—Å –Ω–µ—Ç —ç—Ç–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞!" to {_p}
            play sound "entity.villager.no" to {_p}
            stop
        
        set {_price} to {price::%{_itemname}%::sell}
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã
        if {_price} is not set:
            send "&c–û—à–∏–±–∫–∞: —Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞!" to {_p}
            send "&7–ü—Ä–µ–¥–º–µ—Ç: %{_itemname}%" to {_p}
            stop
        
        remove 1 of {_item} from {_p}'s inventory
        add {_price} to balance of {_p}
        
        set {_newbalance} to balance of {_p}
        send "&7–í—ã –ø—Ä–æ–¥–∞–ª–∏ &c1x %{_item}% &7–∑–∞ &c%{_price}% &7–º–æ–Ω–µ—Ç" to {_p}
        send "&7–ë–∞–ª–∞–Ω—Å: &c%{_newbalance}% &7–º–æ–Ω–µ—Ç" to {_p}
        play sound "entity.experience_orb.pickup" to {_p}
        
        wait 3 ticks
        refresh_current_menu({_p})
    
    # –ü–ö–ú - –ö–£–ü–ò–¢–¨ 1—à—Ç
    if {_click} is right mouse button:
        set {_price} to {price::%{_itemname}%::buy}
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã
        if {_price} is not set:
            send "&c–û—à–∏–±–∫–∞: —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞!" to {_p}
            send "&7–ü—Ä–µ–¥–º–µ—Ç: %{_itemname}%" to {_p}
            stop
        
        set {_balance} to balance of {_p}
        
        if {_balance} < {_price}:
            send "&c–£ –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!" to {_p}
            send "&7–ù—É–∂–Ω–æ: &c%{_price}% &7–º–æ–Ω–µ—Ç | –£ –≤–∞—Å: &c%{_balance}% &7–º–æ–Ω–µ—Ç" to {_p}
            play sound "entity.villager.no" to {_p}
            stop
        
        give 1 of {_item} to {_p}
        remove {_price} from balance of {_p}
        
        set {_newbalance} to balance of {_p}
        send "&7–í—ã –∫—É–ø–∏–ª–∏ &c1x %{_item}% &7–∑–∞ &c%{_price}% &7–º–æ–Ω–µ—Ç" to {_p}
        send "&7–ë–∞–ª–∞–Ω—Å: &c%{_newbalance}% &7–º–æ–Ω–µ—Ç" to {_p}
        play sound "entity.experience_orb.pickup" to {_p}
        
        wait 3 ticks
        refresh_current_menu({_p})

# === –û–ë–ù–û–í–õ–ï–ù–ò–ï –¢–ï–ö–£–©–ï–ì–û –ú–ï–ù–Æ ===
function refresh_current_menu(p: player):
    if name of {_p}'s current inventory is "&cüß± –ë–õ–û–ö–ò":
        open_blocks_menu({_p})
    else if name of {_p}'s current inventory is "&cüíé –†–£–î–´":
        open_ores_menu({_p})
    else if name of {_p}'s current inventory is "&cüåæ –†–ï–°–£–†–°–´":
        open_farming_menu({_p})
